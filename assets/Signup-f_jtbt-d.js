import{j as e,u as Q,b as X,c as Y,r,B as L,T as y,L as Z,a as q,D as _,S as $}from"./index-AXV2ZCY0.js";import{g as ee,F as d,a as m,v as se,b as re}from"./authValidation-CDRROgMH.js";import{A as te,I as u}from"./AlertMessage-D1JRVXTj.js";import{S as A}from"./Stack-BjEHsxuI.js";import{F as x}from"./FormHelperText-CfOkBQ-o.js";function ae(){return e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"24",height:"24",viewBox:"0 0 48 48",children:[e.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),e.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),e.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),e.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}function me(){var V,H;const{signup:N,loading:E,error:b,clearError:T}=Q();X(),(H=(V=Y().state)==null?void 0:V.from)!=null&&H.pathname;const[h,k]=r.useState(""),[p,I]=r.useState(""),[n,W]=r.useState(""),[f,G]=r.useState(""),[j,F]=r.useState(""),[g,P]=r.useState(""),[i,w]=r.useState(""),[C,B]=r.useState(""),[t,D]=r.useState(!1),[R,v]=r.useState(!1),[S,U]=ee(n),l=s=>{const{name:a,value:o}=s.target;D(!1),v(!1),a==="name"&&k(o),a==="email"&&I(o),a==="password"&&W(o),a==="confirmPassword"&&G(o)},J=s=>s?"":"სახელი სავალდებულოა.",K=s=>s?s!==n?"პაროლები არ ემთხვევა.":"":"პაროლის დადასტურება სავალდებულოა.",c=s=>{s==="name"&&F(""),s==="email"&&P(""),s==="password"&&w(""),s==="confirmPassword"&&B(""),v(!1)},O=async s=>{s.preventDefault(),T(),D(!0);const a=J(h),o=re(p),M=se(n,!0),z=K(f);if(F(a),P(o),w(M),B(z),a||o||M||z||S<2){v(!0);return}if(S<2){w("პაროლი უნდა იყოს ძლიერი.");return}await N(h,p,n,f)};return e.jsx(L,{sx:{display:"flex",minHeight:"100vh",justifyContent:"center",bgcolor:"background.level1"},children:e.jsxs(L,{component:"main",sx:{display:"flex",flexDirection:"column",justifyContent:"center",gap:1,maxWidth:450,width:"100%",marginTop:"48px",marginBottom:"64px",px:4,py:6},children:[b&&e.jsx(te,{color:"danger",message:b}),e.jsx(y,{level:"h3",children:"რეგისტრაცია"}),e.jsxs(y,{fontSize:"15px",marginBottom:"24px",children:["უკვე გაქვთ ანგარიში?",e.jsx(Z,{href:"/auth/login",level:"body2",paddingLeft:"5px",underline:"always",children:"შესვლა"})]}),e.jsx(q,{fullWidth:!0,variant:"soft",startDecorator:e.jsx(ae,{}),children:"Continue with Google"}),e.jsx(_,{children:"ან"}),e.jsx("form",{onSubmit:s=>O(s),noValidate:!0,children:e.jsxs(A,{gap:2,children:[e.jsxs(d,{error:t&&!!j,children:[e.jsx(m,{children:"სახელი"}),e.jsx(u,{type:"text",name:"name",value:h,onChange:s=>l(s),onFocus:()=>c("name"),required:!0}),t&&j&&e.jsx(x,{children:j})]}),e.jsxs(d,{error:t&&!!g,children:[e.jsx(m,{children:"ელ.ფოსტა"}),e.jsx(u,{type:"email",name:"email",value:p,onChange:s=>l(s),onFocus:()=>c("email"),required:!0}),t&&g&&e.jsx(x,{children:g})]}),e.jsxs(d,{error:t&&!!i,children:[e.jsx(m,{children:"პაროლი"}),e.jsxs(A,{spacing:.5,sx:{"--hue":120*(S/4)},children:[e.jsx(u,{type:"password",name:"password",value:n,onChange:s=>l(s),onFocus:()=>c("password"),required:!0}),e.jsxs(x,{level:"body-xs",sx:{alignSelf:"flex-start",color:"hsl(var(--hue) 90% 40%)"},children:[!i&&U,t&&i&&e.jsx(y,{level:"body2",sx:{color:"#C41C1C"},children:i})]})]})]}),e.jsxs(d,{error:t&&!!C,children:[e.jsx(m,{children:"პაროლის დადასტურება"}),e.jsx(u,{type:"password",name:"confirmPassword",value:f,onChange:s=>l(s),onFocus:()=>c("confirmPassword"),required:!0}),t&&C&&e.jsx(x,{children:C})]}),e.jsx(q,{fullWidth:!0,variant:"solid",type:"submit",disabled:R||E,children:E?e.jsx($,{}):"რეგისტრაცია"})]})})]})})}export{me as default};
